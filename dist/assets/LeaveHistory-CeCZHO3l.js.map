{"version":3,"file":"LeaveHistory-CeCZHO3l.js","sources":["../../src/pages/LeaveHistory.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from '../components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';\nimport { Calendar, Clock } from 'lucide-react';\nimport { useAuth } from '../auth/AuthContext';\nimport { toast } from 'react-toastify';\nimport { LeaveRequest } from '../types';\n\nconst LeaveHistory: React.FC = () => {\n  const { getUserLeaves } = useAuth();\n  const [leaves, setLeaves] = useState<LeaveRequest[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchLeaves = async () => {\n      try {\n        const userLeaves = await getUserLeaves();\n        setLeaves(userLeaves);\n      } catch (error) {\n        toast.error('Failed to fetch leave history');\n        console.error('Error fetching leaves:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLeaves();\n  }, [getUserLeaves]);\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'approved':\n        return 'bg-green-100 text-green-600';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-600';\n      case 'rejected':\n        return 'bg-red-100 text-red-600';\n      default:\n        return 'bg-gray-100 text-gray-600';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-2xl font-bold\">Leave History</h1>\n          <Link to=\"/dashboard\">\n            <Button variant=\"outline\">Back to Dashboard</Button>\n          </Link>\n        </div>\n\n        <div className=\"space-y-4\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">All Leave Requests</CardTitle>\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              {loading ? (\n                <div className=\"text-center py-4\">Loading...</div>\n              ) : leaves.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {leaves.map((leave) => (\n                    <div key={leave.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                      <div>\n                        <p className=\"font-medium\">{leave.leaveType}</p>\n                        <p className=\"text-sm text-gray-500\">\n                          {formatDate(leave.startDate)} - {formatDate(leave.endDate)}\n                        </p>\n                        {leave.reason && (\n                          <p className=\"text-sm text-gray-500 mt-1\">\n                            Reason: {leave.reason}\n                          </p>\n                        )}\n                        {leave.approverComment && (\n                          <p className=\"text-sm text-gray-500 mt-1\">\n                            Comment: {leave.approverComment}\n                          </p>\n                        )}\n                      </div>\n                      <span className={`px-3 py-1 text-sm font-medium rounded-full ${getStatusColor(leave.status)}`}>\n                        {leave.status.toUpperCase()}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center text-sm text-gray-500 py-4\">\n                  No leave history found\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Leave Statistics</CardTitle>\n              <Clock className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"p-4 border rounded-lg\">\n                  <p className=\"text-sm text-gray-500\">Total Requests</p>\n                  <p className=\"text-2xl font-bold\">{leaves.length}</p>\n                </div>\n                <div className=\"p-4 border rounded-lg\">\n                  <p className=\"text-sm text-gray-500\">Approved Requests</p>\n                  <p className=\"text-2xl font-bold\">\n                    {leaves.filter(leave => leave.status.toLowerCase() === 'approved').length}\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LeaveHistory; "],"names":["LeaveHistory","getUserLeaves","useAuth","leaves","setLeaves","useState","loading","setLoading","useEffect","userLeaves","error","toast","getStatusColor","status","formatDate","dateString","jsxs","jsx","Link","Button","Card","CardHeader","CardTitle","Calendar","CardContent","leave","Clock"],"mappings":"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"}