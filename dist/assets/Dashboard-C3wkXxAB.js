import{a as v,r as c,u as N,t as u,j as e,L as l}from"./index-DJUZKzu_.js";import{B as n}from"./button-CAINd3Jp.js";import{C as i,a as d,b as o,c as m}from"./card-DLOJ-z9V.js";import{c as w,C as b}from"./calendar-a2GBqBfK.js";import{F as g}from"./file-text-CF23PzCq.js";import{C as L}from"./clock-C1eaTBEf.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=w("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),U=()=>{const{user:s,getUserLeaves:x}=v(),[h,f]=c.useState([]),[j,p]=c.useState(!0),a=N();c.useEffect(()=>{if(!s){u.error("User not authenticated"),a.push("/login");return}if(s.role!="Staff"){a.push("/not-authorized");return}else a.push("/dashboard");(async()=>{try{const r=await x();f(r)}catch(r){u.error("Failed to fetch leave data"),console.error("Error fetching leaves:",r)}finally{p(!1)}})()},[s,x,a]);const y=t=>{switch(t.toLowerCase()){case"approved":return"text-green-500";case"pending":return"text-yellow-500";case"rejected":return"text-red-500";default:return"text-gray-500"}};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",(s==null?void 0:s.name)??"User"]}),e.jsx(l,{to:"/leave/apply",children:e.jsxs(n,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Apply for Leave"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Leave Balance"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"Annual Leave"}),e.jsxs("span",{className:"font-medium",children:[(s==null?void 0:s.leaveBalance)||0," days"]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:"Sick Leave"}),e.jsxs("span",{className:"font-medium",children:[(s==null?void 0:s.sickLeaveBalance)||0," days"]})]})]})]}),e.jsxs(i,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Recent Requests"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(m,{children:j?e.jsx("div",{className:"text-center",children:"Loading..."}):h.length>0?h.slice(0,2).map(t=>e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm",children:t.leaveType}),e.jsx("span",{className:`text-sm ${y(t.status)}`,children:t.status.toUpperCase()})]},t.id)):e.jsx("div",{className:"text-center text-sm text-gray-500",children:"No leave requests yet"})})]}),e.jsxs(i,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Quick Actions"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{to:"/leave/history",children:e.jsx(n,{variant:"outline",className:"w-full justify-start",children:"View Leave History"})}),e.jsx(l,{to:"/team-calendar",children:e.jsx(n,{variant:"outline",className:"w-full justify-start",children:"Team Calendar"})})]})})]})]})]})};export{U as default};
//# sourceMappingURL=Dashboard-C3wkXxAB.js.map
